<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>Demo</title>
<meta name="description" content="" />
<meta name="viewport" content="width=device-width" />
<base href="/" />
<link rel="stylesheet" type="text/css"
	href="/webjars/bootstrap/css/bootstrap.min.css" />
<script type="text/javascript" src="/webjars/jquery/jquery.min.js"></script>
<script type="text/javascript"
	src="/webjars/bootstrap/js/bootstrap.min.js"></script>
</head>
<body ng-app="app" ng-controller="home as home">
	<h1>Login</h1>
	<div class="container" ng-show="!home.authenticated">
		<div>
			With Facebook: <a href="/connect/facebook">click here</a>
		</div>
		<div>
			With Google: <a href="/connect/google">click here</a>
		</div>
	</div>
	<div class="container" ng-show="home.authenticated">
		Logged in as: <span ng-bind="home.user"></span>
	</div>
	<div>
		<button ng-click="home.logout()" class="btn btn-primary">Logout</button>
	</div>
</body>
<script type="text/javascript" src="/webjars/angularjs/angular.min.js"></script>
<script type="text/javascript">
	angular.module("app", []).controller("home", function($http) {
		var self = this;
		$http.get("/getUserDetails").success(function(data) {
			self.user = data.userAuthentication.details.name;
			self.authenticated = true;
		}).error(function() {
			self.user = "N/A";
			self.authenticated = false;
		});
		self.logout = function() {
			$http.post('/logout', {}).success(function() {
				self.authenticated = false;
				$location.path("/");
			}).error(function(data) {
				console.log("Logout failed")
				self.authenticated = false;
			});
		};
	});
</script>
</html>





<!-- <!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>Demo</title>
<meta name="description" content="" />
<meta name="viewport" content="width=device-width" />
<base href="/" />
<link rel="stylesheet" type="text/css"
	href="/webjars/bootstrap/css/bootstrap.min.css" />
<script type="text/javascript" src="/webjars/jquery/jquery.min.js"></script>
<script type="text/javascript"
	src="/webjars/bootstrap/js/bootstrap.min.js"></script>
</head>
<body ng-app="app" ng-controller="home as home">

	<div class="tab-content">
    		<div id="signIn" class="tab-pane fade in active">
 				<div class="form-group">
      				<input type="email" class="form-control" style="margin-top:15px;height:40px" placeholder="Email or username" name="emailId" ng-model="emailId"/>
      				<input type="password" class="form-control" style="margin-top:25px;height:40px" placeholder="password" name="loginPassword" ng-model="loginPassword"/>
      				<div><p font-color="red">{{invalid}}</p></div>
              <input type="button" id="login" class="btn btn-primary" style="margin-top:25px;width:100%" value="Sign in" ng-click="login()"/>
      			  
            </div>
    		</div>
    	
    		<div id="register" class="tab-pane fade">
      			<div class="form-group">
      				<input type="email" class="form-control" style="margin-top:15px;height:40px" placeholder="Email" name="regEmail" ng-model="regEmail"/>
      				<input type="password" class="form-control" style="margin-top:10px;height:40px" placeholder="password" name="password" ng-model="password"/>
      				<input type="text" class="form-control" style="margin-top:10px;height:40px;width:49%;float:left" placeholder="First name" name="firstName" ng-model="firstName"/>
      				<input type="text" class="form-control" style="margin-top:10px;height:40px;width:49%;float:right" placeholder="Last name" name="lastName" ng-model="lastName"/>
      			<input type="button" class="btn btn-primary" style="margin-top:10px;width:100%" value="Register" ng-click="register()"/>
               
      			</div>
    		</div>
     	</div>
	<h1>Login</h1>
	<div class="container" ng-show="!home.authenticated">
		<div>
			With Facebook: <a href="/connect/facebook">click here</a>
		</div>
		<div>
			With Google: <a href="/connect/google">click here</a>
		</div>
	</div>
	<div class="container" ng-show="home.authenticated">
		Logged in as: <span ng-bind="home.user"></span>
	</div>
	<div>
		<button ng-click="home.logout()" class="btn btn-primary">Logout</button>
	</div>
</body>
<script type="text/javascript" src="/webjars/angularjs/angular.min.js"></script>
<script type="text/javascript">
	angular.module("app", []).controller("home", function($http,$scope) {

		$scope.login = function(){
			$http({
				url : "/CusrLogin",
				method:"POST",
				data: {
					"emailId":$scope.emailId,
					"loginPassword":$scope.loginPassword
				}
			}).success(function(data){
				if(data.result=="200"){
					console.log("success login");
					var username = data.UserEmail;
					window.location="/mainpage/"+username;
				}
				else if(data.result=="404"){
					$scope.invalid="Failed Login Invalid username or password";
				}
			});
		};
		$scope.register = function(){
			$http({
				url : "/CusrRegistration",
				method:"POST",
				data: {
					"regEmail":$scope.regEmail,
					"password":$scope.password,
					"firstName":$scope.firstName,
					"lastName":$scope.lastName,
				}
			}).success(function(data){
				if(data.result=="200"){
					console.log("successfully Registered");
				}
				if (data.result=="404"){
					console.log("failed to register, user already exsists");
				}
			});
		};



		var self = this;
		$http.post("/getUserDetails").success(function(data) {
			self.user = data.userAuthentication.details.name;
			self.authenticated = true;
			//window.location = "/mainpage/"+data.userAuthentication.details.name;
			var username = data.userAuthentication.details.name;
			window.location="/mainpage/"+username;
		}).error(function() {
			self.user = "N/A";
			self.authenticated = false;
		});
		self.logout = function() {
			$http.post('/logout', {}).success(function() {
				self.authenticated = false;
				$location.path("/");
			}).error(function(data) {
				console.log("Logout failed")
				self.authenticated = false;
			});
		};
	});
</script>
</html> -->